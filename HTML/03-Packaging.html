<!DOCTYPE html>
<html lang="en" style="scroll-behavior:smooth" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>Packaging</title>
<style media="screen">
html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}body{margin:0;}article,aside,footer,header,nav,section{display:block;}h1{font-size:2em;margin:0.67em 0;}figcaption,figure,main{display:block;}figure{margin:1em 40px;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace, monospace;font-size:1em;}a{background-color:transparent;-webkit-text-decoration-skip:objects;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:inherit;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace, monospace;font-size:1em;}dfn{font-style:italic;}mark{background-color:#ff0;color:#000;}small{font-size:0.8em;}sub,sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}audio,video{display:inline-block;}audio:not([controls]){display:none;height:0;}img{border-style:none;}svg:not(:root){overflow:hidden;}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:1em;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,html [type="button"], [type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{display:inline-block;vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details, menu{display:block;}summary{display:list-item;}canvas{display:inline-block;}template{display:none;}[hidden]{display:none;}body{margin:0;font-family:"Bookman Old Style", "Callisto MT", Bookman, "Goudy Old Style", Garamond, serif;background-color:#fdfdfd;font-size:18px;line-height:1.4;max-width:none;padding:0.83em;color:#292929;word-wrap:break-word;overflow-wrap:break-word;}h1, h2, h3, h4, h5, h6{color:#404040;font-weight:800;padding-left:0;}h1, h2, h3, h4, h5, h6{font-family:"Century Gothic", Verdana, "Sans";}h1, h2, h3, h4, p{margin-bottom:0.88em;}h1{font-size:1.8em;margin:0.27em 0 1.11em 0;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:1em;background-color:inherit;}h2{font-size:1.44em;margin:0.55em 0 0.55em 0;padding-top:0.55em;border-bottom:1px solid Silver;}h3{margin:0;margin-top:0.55em;font-size:1.22em;}nav h3{font-size:0.88em;margin-left:0.83em;margin-bottom:0.27em;}h4{font-size:1em;margin:0;margin-top:0.55em;}h5{font-size:0.94em;margin:0;margin-top:0.66em;padding:0;}h6{font-size:0.88em;margin:0;margin-top:0.66em;padding:0;}a{color:#0099ff;margin:0;padding:0;vertical-align:baseline;}a:visited{color:purple;}a.autoheader_anchor{text-decoration:none;}ul{list-style-type:disc;}ul, ol{padding:0;margin:0;}dd{padding-top:0.25em;}p.first_dd{padding-top:0.25em;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:1.38em;margin-bottom:0.55em;}ul > li{margin-left:1.11em;}li ul{margin-left:0.55em;}li ul{margin-left:0.27em;}li p{padding:1px 0 0 0;margin:0.55em 0 0.27em 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:0.44em 0 0 0;margin:0;}pre{overflow:scroll;padding:0.55em 0.27em;margin:0.55em 0 0.55em 0 !important;background-color:#faebd7;color:#3e3e3e;border:1px Silver dashed;display:block;font-family:APLFont, monospace;font-weight:400;white-space:pre-wrap;}pre > code{line-height:1.2;border:0;padding:0;margin:0;background-color:inherit;color:inherit;font-weight:inherit;white-space:pre-wrap;}a code{padding:0;font-size:1em;}nav code{background-color:inherit;font-weight:400;color:inherit;}code{font-family:APLFont, monospace;background-color:#e7e7e7;color:Black;font-weight:800;line-height:1.2;font-size:0.88em;margin:0;color:#950000;padding:0 0.16em;}tbody tr:nth-child(even){background-color:#F0F0F0;}th{background-color:#E6E6E6;color:black;}th, td{padding:0.16em 0.55em;}table{border-color:Black;margin:1.11em 0 1.11em 0;border:2px black;border-collapse:collapse;font-family:APLFont;font-size:0.88em;line-height:1.2;border:1px solid Gray;}li > table{margin:0.55em 0 0.55em 0;}tr{margin:1.11em;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:0.27em solid silver;padding-left:0.27em;margin:0.83em 0.27em 0.83em 0.55em;}blockquote ul li{margin-left:1.38em;}blockquote ol li{margin-left:1.38em;}li > blockquote{margin-left:0;}nav{background-color:#f5f5f5;border:1px solid Black;padding:0.55em;margin:0.55em;margin-right:0;box-shadow:0.27em 0.27em 0.27em Gray;overflow:hidden;}nav#main_nav{position:fixed;top:0;right:0.55em;float:none;width:auto;}nav#main_nav_no_collapse li{font-size:0.77rem;}nav#main_nav_no_collapse li{line-height:1.5;}nav ul{list-style-type:none;margin:0 0 0.11em 0;padding:0;}nav a:visited{color:black;}nav ul li{margin-bottom:0.16em;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:0.75rem;line-height:1.3;padding:0;margin-top:0;margin-bottom:0;margin-left:0.83em;}nav p{font-weight:bold;font-size:0.75rem;padding-top:0;}dl{margin-top:0.1em;margin-bottom:0.1em;}dt{margin-top:0.75em;margin-bottom:0.1em;font-weight:800;}label#hide_toc_label{font-size:0.8em;}.toc-container{position:relative;height:auto;}div.toc-container h1{font-size:0.88em;margin:0.27em 0 0.27em 0;}[type="checkbox"]{position:absolute;left:-9999px;}label{display:block;width:100%;height:1.1em;cursor:pointer;top:0;padding-left:1.1em;}label:before{content:'Table of contents \25BC';font-weight:bold;font-size:90%;padding-bottom:0;}[type="checkbox"] ~ div{display:none;}[type="checkbox"]:checked ~ div{display:block;margin-top:1.1em;}[type="checkbox"]:checked + label{top:100%;}[type="checkbox"]:checked + label:before{content:'Table of contents â–²';}div#footnotes_div p{line-height:1;padding-bottom:0;padding-top:0;}div#footnotes_div ol{padding-top:0;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("http://misc.aplteam.com/apl385.ttf") format("truetype");}.no_display{display:none;}.red{color:red;}img{margin-top:0.55em;margin-bottom:0.27em;}div.leanpub{padding:0.83em 0.55em 1.11em 0;margin:0.55em 0 0 0.27em;overflow:auto;}div.leanpub_A{border:1px solid black;background-color:#f1f1f1;padding:0.55em;margin:1.11em 0 0.83em 0;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:0.27em 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 1.11em 0.27em 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub img{float:left;padding:0;margin:0.55em 1.11em 0 0;clear:both;}div.leanpub tbody *{background-color:transparent;}div.leanpub p{padding:0.17em 0 0 0;margin:0;}span.leanpub_code{color:Red;}div.leanpub p{display:block;padding:0.44em 0 0 0;}div.leanpub > div{margin-left:2.27em;}.print_only{display:none;}
</style>
<style media="print">
@page{margin:25mm 20mm 25mm 20mm;}body{font-family:"Bookman Old Style", "Callisto MT", Bookman,"Goudy Old Style", Garamond, serif;font-size:9pt;line-height:1.2;}h1{font-size:170%;}h2{font-size:110%;}h3{font-size:110%;}h4{font-size:105%;}h5{font-size:100%;}h6{font-size:95%;}h1{margin:0 0 20pt 0;}h2{margin:15pt 0 3pt 0;}h3{margin:10pt 0 0pt 0;}h4{margin:10pt 0 0pt 0;}h5{margin:9pt 0 0pt 0;}h6{margin:9pt 0 0pt 0;}h1, h2, h3, h4, h5, h6{color:black;font-family:"Century Gothic", Verdana, "Sans";page-break-after:avoid;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;}h2{border-bottom:1pt solid Silver;padding-bottom:2pt;}.h_tag{page-break-after:avoid;break-after:avoid;}abbr[title]{border-bottom:0;text-decoration:none;}a{color:black;margin:0;padding:0;vertical-align:baseline;text-decoration:none;font-style:italic;}a.autoheader_anchor{text-decoration:none;font-style:normal;page-break-after:avoid;break-after:avoid;}ul{list-style-type:square;}ul, ol{padding:0;margin:0;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:13pt;margin-bottom:5pt;}ul > li{margin-left:10pt;}li ul{margin-left:5pt;}li ul{margin-left:3pt;}li p{padding:1pt 0 0 0;margin:5pt 0 3pt 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:4pt 0 0 0;margin:0;color:black;}pre{padding:3pt;margin:5pt 0;white-space:pre-wrap;background-color:#FAFAFA;border:1pt Silver solid;display:block;font-family:APLFont, monospace;page-break-inside:avoid;-webkit-print-color-adjust:exact;}pre code{background-color:#FAFAFA;color:Black;padding:0;margin:0 0 -6pt 0;line-height:1.1;border:0;white-space:pre-wrap;}code{font-family:APLFont, monospace;line-height:1.2;font-size:9pt;padding:3pt 1pt 3pt 1pt;color:#950000;padding:3pt 4pt 3pt 4pt;}tbody th, tfoot tr{background-color:#e6e6e6;}tbody tr:nth-child(even){background-color:#fafafa;}th{background-color:#F0F0F0;}th, td{padding:1pt 5pt;}table{margin:10pt 0;font-family:APLFont;font-size:9pt;padding:0;border:1pt solid silver;-webkit-print-color-adjust:exact;}li > table{margin:10pt 0 10pt 0;}tr{margin:20pt;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:5pt solid silver;padding-left:5pt;margin:8pt 3pt 8pt 8pt;}nav{background-color:#f8f8f8;border:1pt solid Gray;width:auto;float:right;padding:5pt 5pt 5pt 0;margin:5pt 0 5pt 5pt;page-break-inside:avoid;}nav *{font-size:75%;}nav ul{list-style-type:none;margin:0 0 2pt 0;padding:0;}nav ul li{margin-bottom:0;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:9pt;line-height:1;padding:0;margin-top:0;margin-bottom:0;margin-left:8pt;}dl{margin-top:0;margin-bottom:10pt;}dt{margin-top:10pt;margin-bottom:0;font-weight:800;page-break-inside:avoid;}dd{margin-top:2pt;}label#hide_toc_label{font-size:65%;}.toc-container{position:relative;height:auto;margin-top:5pt;}.toc-container h1{margin:0 0 7pt 7pt;}[type="checkbox"]{display:none;}label{display:block;width:100%;height:1.1em;top:0;padding-left:10pt;}label:before{content:'Table of contents';font-weight:bold;font-size:140%;padding-bottom:10pt;}a.external_link::before{content:" ğŸŒ";}a.bookmark_link::before{content:" â¯";}a.mailto_link::before{content:" âœ‰"}nav a.bookmark_link{font-style:normal;}nav p{margin-left:10pt;font-weight:bold;font-size:9pt;}nav a{font-style:normal;}nav a.bookmark_link::before{content:"";}div#footnotes_div a::before{content:"";}div#footnotes_div a{font-style:normal;}div#footnotes_div{page-break-inside:avoid;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("http://misc.aplteam.com/apl385.ttf") format("truetype");}.no_print{display:none;}.red{color:red;}.avoid_page_break{page-break-inside:avoid;}.page_break_before{page-break-before:auto;}div.leanpub{margin:10pt 0 10pt 8pt;page-break-inside:avoid;}div.leanpub_A{border:1pt solid black;background-color:#f9f9f9;padding:5pt;margin:10pt 0 10pt 0;page-break-inside:avoid;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:3pt 0 0 0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:3pt 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 10pt 2pt 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub > div > h1:first-child{padding-top:5pt;}div.leanpub img{float:left;padding:0;margin:5pt 10pt 0 0;clear:both;}div.leanpub p{padding:3pt 0 0 0;margin:0;}span.leanpub_code{color:black;}div.leanpub p{display:block;padding:8pt 0 0 0;}div.leanpub > div{margin-left:35pt;}sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;top:-0.4em;}
</style>
<meta name="author" content="kai">
</head>
<body>
<nav id="main_nav_no_collapse">
<div class="toc-container">
<h3>Table of contents</h3>
<ul>
<li><a href="#Output-to-the-session-log">Output to the session log</a></li>
<li><a href="#Preparing-the-application">Preparing the application</a></li>
<li><a href="#Conclusions">Conclusions</a></li>
<li><a href="#Exporting-the-application">Exporting the application</a></li>
<li><a href="#Running-the-stand-alone-EXE">Running the stand-alone EXE</a>
</ul>
</div>
</nav>
<div class="h_tag">
<a href="#Package-MyApp-as-an-executable" id="Package-MyApp-as-an-executable" class="autoheader_anchor">
<h1>Package MyApp as an executable</h1>
</a>
</div>
<p>Now we will make some adjustments to prepare <code>MyApp</code> for being packaged as an <abbr title="Executable file with the extension 'exe'">EXE</abbr>. It will run from the command line and it will run â€˜headlessâ€™ â€“ without a user interface (UI).</p>
<p>Copy all files in <code>z:\code\v02\</code> to <code>z:\code\v03\</code>. Alternatively you can download version 3 from <a href="https://cookbook.dyalog.com" class="external_link">https://cookbook.dyalog.com</a>.</p>
<div class="h_tag">
<a href="#Output-to-the-session-log" id="Output-to-the-session-log" class="autoheader_anchor">
<h2>Output to the session log</h2>
</a>
</div>
<p>In a runtime interpreter or an <abbr title="Executable file with the extension 'exe'">EXE</abbr>, there is no APL session, and output to the session which would have been visible in a development system will simply disappear.</p>
<div class="leanpub">
<img src="https://download.aplwiki.com/LeanPub/Images/information.png" alt="Information">
<div>
<p>Note that output assigned to <code>â•</code> or <code>â</code> does not stop the runtime executable.</p>
<p>However, when the result of a function is neither consumed by another function nor assigned to a variable then you will see the message â€œThis Dyalog APL runtime application has attempted to use the APL session and therefore be closed.â€, and that will be the end of it.</p>
</div>
</div>

<p>If we want to see this output, we need to write it to a log file. But how do we find out where we need to make changes? We recommend you think about this from the start, and ensure that all <em>intentional</em> output goes through a log function, or at least use an explicit <code>â•â†</code> so that output can easily be identified in the source.</p>
<div class="leanpub_A">
<h3>Unwanted output to the session</h3>
<p>What can you do if you have output appearing in the session and you donâ€™t know where in your application it is being generated? The easiest way is to associate a callback function with the <code>SessionPrint</code> event as in:</p>
<pre><code>   'â•se' â•WS 'Event' 'SessionPrint' '#.Catch'
   #.â•FX â†‘'what Catch m'  ':If 0âˆŠâ´what' '. â !' ':Else' 'â•â†what' ':Endif'
   â•FX 'test arg'  'â•â†arg'
   test 1 2 3
âSYNTAX ERROR
Catch[2] . â !</code></pre>
<p>You can even use this to investigate what is about to be written to the session (the left argument of <code>Catch</code>) and make the function stop when it reaches the output you are looking for. In the above example we check for anything thatâ€™s empty.</p>
<p>Notes:</p>
<ul>
<li>Avoid the <code>â•se.onSessionPrintâ†'#.Catch'</code> syntax with <code>â•SE</code>; just stick with <code>â•WS</code> as in the above example.</li>
<li>Remember to clear the stack after <code>Catch</code> crashed. If you donâ€™t, and instead call <code>test</code> again, it will behave as if there were no handler associated with the <code>SessionPrint</code> event.</li>
</ul>
</div>

<p><code>TxtToCsv</code> has a shy result, so it won't write its result to the session. Thatâ€™s fine.</p>
<div class="h_tag">
<a href="#Preparing-the-application" id="Preparing-the-application" class="autoheader_anchor">
<h2>Preparing the application</h2>
</a>
</div>
<p><code>TxtToCsv</code> needs an argument. The <abbr title="Executable file with the extension 'exe'">EXE</abbr> we are about to create must fetch it from the command line. Weâ€™ll give <code>MyApp</code> a function <code>StartFromCmdLine</code>.</p>
<p>We will also introduce <code>SetLX</code>: the last line of the <abbr title="File with the extension 'dyapp' that contains 'Load' and 'Run' commands in order to put together an APL application">DYAPP</abbr> will run it to set <code>â•LX</code>:</p>
<pre><code>Target #
Load Constants
Load Utilities
Load MyApp
Run #.MyApp.SetLX â¬</code></pre>
<p>In <code>MyApp.dyalog</code>:</p>
<pre><code>:Namespace MyApp

(â•IO â•ML â•WX â•PP â•DIV)â†1 1 3 15 1

<span class="leanpub_code">    âˆ‡râ†Version
    â * 1.0.0
    â   * Runs as a stand-alone EXE and takes parameters from the command line.
      râ†(â•â•THIS) '1.0.0' 'YYYY-MM-DD'
    âˆ‡
</span>    ...
    â === VARIABLES ===

<span class="leanpub_code">    Accentsâ†'ÃÃ‚ÃƒÃ€Ã„Ã…Ã‡ÃÃˆÃŠÃ‹Ã‰ÃŒÃÃÃÃ‘Ã’Ã“Ã”Ã•Ã–Ã˜Ã™ÃšÃ›ÃœÃ' 'AAAAAACDEEEEIIIINOOOOOOUUUUY'
</span>
â === End of variables definition ===

      CountLettersâ†{
<span class="leanpub_code">          {âº(â‰¢âµ)}âŒ¸â•A{âµâŒ¿â¨âµâˆŠâº}Accents map toUppercase âµ
</span>      }
    ...
<span class="leanpub_code">    âˆ‡ {r}â†SetLX dummy
    â Set Latent Expression (needed in order to export workspace as EXE)
     #.â•IOâ†1 â‹„ #.â•MLâ†1 â‹„ #.â•WXâ†3 â‹„ #.â•PPâ†15 â‹„ #.â•DIVâ†1
     râ†â¬
     â•LXâ†'#.MyApp.StartFromCmdLine #.MyApp.GetCommandLineArgs â¬'
    âˆ‡

    âˆ‡ {r}â†StartFromCmdLine arg
    â Run the application; arg = usually command line parameters .
       râ†â¬
       râ†TxtToCsv arg~''''
    âˆ‡

    âˆ‡ râ†GetCommandLineArgs dummy
       râ†âŠƒÂ¯1â†‘1â†“2 â•NQ'.' 'GetCommandLineArgs' â Take the last one
    âˆ‡
</span>
:EndNamespace</code></pre>
<p>Changes are emphasised.</p>
<div class="h_tag">
<a href="#Conclusions" id="Conclusions" class="autoheader_anchor">
<h2>Conclusions</h2>
</a>
</div>
<p>Now MyApp is ready to be run from the Windows command line, with the name of the file to be processed following the command name.</p>
<p>Notes:</p>
<ul>
<li>By introducing a function <code>Version</code> we start to keep track of changes.</li>
<li><code>Accents</code> is now a vector of text vectors (vtv). There is no point in making it a matrix when <code>CountLetters</code> (the only function that consumes <code>Accents</code>) requires a vtv anyway. We were able to simplify <code>CountLetters</code> as a bonus.</li>
<li>Functions should return a result, even <code>StartFromCmdLine</code> and <code>SetLX</code>. Always.
<p>If there is nothing reasonable to return as a result, return <code>â¬</code> as a shy result as in <code>StartFromCmdLine</code>. Make this a habit. It makes life easier in the long run.</p>
<p>How? One example: you cannot call from a dfn a function that does not return a result. Another: you cannot provide it as an operand to the <code>â£</code> (power) operator.</p></li>
<li><em>Always</em> make a function monadic rather than niladic even if the function does not require an argument right now.
<p>It is far easier to change a monadic function that has ignored its argument so far to one that actually requires an argument than to change a niladic function to a monadic one later on, especially when the function is called in many places, and this is something you <em>will</em> eventually encounter.</p></li>
<li><code>GetCommandLineArgs</code> ignores its right argument. It makes that very clear by using the name <code>dummy</code>.
<p>If you later change this, then of course change <code>dummy</code> to something meaningful.</p></li>
<li>Ensure a <code>â•LX</code> statement can be executed from anywhere. That requires names in it to be fully qualified, e.g. <code>#.MyApp</code> rather than <code>MyApp</code>. Make that a habit too. You will appreciate it when later you execute <code>ââ•LX</code> when you are not in the workspace root.</li>
<li>Would <code>#.MyApp.(StartFromCmdLine GetCommandLineArgs â¬)</code> be better than <code>#.MyApp.StartFromCmdLine #.MyApp.GetCommandLineArgs â¬</code>? It is shorter.
<p>Good point, but there is a drawback: you cannot &lt;Shift+Enter&gt; on either of the two functions within the shorter expression but you can with the longer one.</p></li>
<li>Currently we allow only one file (or folder) to be specified. Thatâ€™s the last parameter specified on the command line. Weâ€™ll improve on this later.</li>
<li>Note that we now set <code>â•IO</code>, <code>â•ML</code>, <code>â•WX</code>, <code>â•PP</code> and <code>â•DIV</code> in <code>#</code> (!) as soon as possible.
<p>The reason: we want to ensure when we create a namespace with <code>#.â•NS ''</code> those system variables have the expected values.</p>
<p>Alternatively you could ensure you execute <code>â•NS ''</code> within a namespace that is known to have system variables with the right values.</p></li>
</ul>
<div class="leanpub">
<img src="https://download.aplwiki.com/LeanPub/Images/warning.png" alt="Warning">
<div>
<h3>Inheriting system variables</h3>
<p>A common source of confusion is code that relies on system variables having expected values. Your preferred values for those system variables are set in the Dyalog configuration.</p>
<p>Whenever you execute then, say, <code>#.â•NS ''</code> you can expect the resulting namespace to inherit those settings from the hosting namespace. Thatâ€™s fine.</p>
<p>But if you send your <abbr title="Short for Workspaces">WS</abbr> elsewhere then somebody with different values in their Dyalog configuration might load and run your <abbr title="Short for Workspaces">WS</abbr>. In this environment <code>#.â•NS ''</code> creates a namespace with different values for system variables: a recipe for disaster.</p>
</div>
</div>

<div class="h_tag">
<a href="#Exporting-the-application" id="Exporting-the-application" class="autoheader_anchor">
<h2>Exporting the application</h2>
</a>
</div>
<p>Weâ€™re now nearly ready to export the first version of MyApp as an <abbr title="Executable file with the extension 'exe'">EXE</abbr>.</p>
<ol start="1">
<li>Double-click the <abbr title="File with the extension 'dyapp' that contains 'Load' and 'Run' commands in order to put together an APL application">DYAPP</abbr> to create the <abbr title="Short for Workspaces">WS</abbr>.</li>
<li>From the <em>File</em> menu pick <em>Export</em>.</li>
<li>Pick <code>Z:\code\v03</code> as the destination folder [<a href="#fnref1" class="footnote_link"><sup>1</sup></a>].</li>
<li>From the list <em>Save as type</em> pick <code>Standalone Executable</code>.</li>
<li>Set the <em>File name</em> as <code>MyApp</code>.</li>
<li>Check the <em>Runtime application</em> checkbox.</li>
<li>Clear the <em>Console application</em> checkbox.</li>
<li>Click <em>Save</em>.</li>
</ol>
<p>You should see a message: <em>File Z:\code\v03\MyApp.exe successfully created.</em> This occasionally (rarely) fails for no obvious reason. If it does fail just try again and you should be fine.</p>
<p>If it keeps failing then the by far most common reason is that the <abbr title="Executable file with the extension 'exe'">EXE</abbr> is running â€“ you cannot replace an <abbr title="Executable file with the extension 'exe'">EXE</abbr> while it is running.</p>
<div class="leanpub">
<img src="https://download.aplwiki.com/LeanPub/Images/information.png" alt="Information">
<div>
<p>Although you cannot replace a running <abbr title="Executable file with the extension 'exe'">EXE</abbr> what you <em>can</em> do is to rename it. You can then create a new <abbr title="Executable file with the extension 'exe'">EXE</abbr> with the original name.</p>
</div>
</div>

<div class="leanpub_A">
<h3>The â€œCommand lineâ€ field</h3>
<p>You might think that when you specify something in the â€œCommand lineâ€ field (like <code>name="APL"</code>) this would become available via a <code>2 â•NQ'.' 'GetCommandLineArgs'</code> statement but that would not work. The reason is that <code>2 â•NQ'.' 'GetCommandLineArgs'</code> gives you the command line <em>of the <abbr title="Executable file with the extension 'exe'">EXE</abbr></em> when it is called.</p>
<p>However, you can get the value with <code>2 â•NQ'.' 'GetEnvironment' 'name'</code>.</p>
</div>

<p>In case you wonder what a â€œConsole applicationâ€ is:</p>
<ul>
<li>It sets the <code>IMAGE_SUBSYSTEM_WINDOWS_CUI</code> flag in the header of the <abbr title="Executable file with the extension 'exe'">EXE</abbr>. The effect is that, when called <em>on a command line</em> (also known as the console), it will wait for the program to return.</li>
<li>You can access the variable <code>ERRORLEVEL</code>. Yes, this implies that without ticking the checkbox <em>Console application</em> you <em>cannot</em> access this environment variable.</li>
<li>When double-clicked, a console window pops up.</li>
</ul>
<p>Note that it catches the return code and assigns it to the environment variable â€œERRORLEVELâ€ in any case.</p>
<p>Note that you cannot really debug a console application with Ride; for details see the <em>Debugging a stand-alone <abbr title="Executable file with the extension 'exe'">EXE</abbr></em> chapter.</p>
<p>If you do not check <em>Console application</em>, the program is started as a separate process and you cannot catch the return code.</p>
<p>We therefore recommend you clear the <em>Console application</em> checkbox unless you have a good reason to do otherwise.</p>
<div class="leanpub">
<img src="https://download.aplwiki.com/LeanPub/Images/tip.png" alt="Tip">
<div>
<p>Use the <em>Version</em> button to bind to the <abbr title="Executable file with the extension 'exe'">EXE</abbr> information about the application, author, version, copyright and so on. These pieces of information will show in the <em>Properties/Details</em> tab of the resulting <abbr title="Executable file with the extension 'exe'">EXE</abbr>.</p>
<p>Note that to use the cursor keys or Home or End <em>within</em> a cell the <em>Version</em> dialog box requires you to enter â€˜in-cellâ€™ mode by pressing F2.</p>
</div>
</div>

<div class="leanpub">
<img src="https://download.aplwiki.com/LeanPub/Images/tip.png" alt="Tip">
<div>
<p>You could specify an icon file to replace the Dyalog icon with your own one.</p>
</div>
</div>

<div class="h_tag">
<a href="#Running-the-stand-alone-EXE" id="Running-the-stand-alone-EXE" class="autoheader_anchor">
<h2>Running the stand-alone EXE</h2>
</a>
</div>
<p>Letâ€™s run it. From a command line:</p>
<pre><code>Z:\code\v03\MyApp.exe texts\en</code></pre>
<p>Looking in Windows Explorer at <code>Z:\texts\en.csv</code>, we see its timestamp just changed. Our <abbr title="Executable file with the extension 'exe'">EXE</abbr> works!</p>
<div id="footnotes_div">
<hr>
<p><strong>Footnotes</strong></p>
<ol>
<li id="fnref1"><p>Note that in the Dyalog Cookbook the words <em>folder</em> and <em>directory</em> are used interchangeably.</p><a href="#fnref1" class="footnote_anchor"></a>
</ol>
</div>
</body>
</html>